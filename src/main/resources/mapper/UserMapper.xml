<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="toyproject.mapper.UserMapper">

    <insert id="insertUser" parameterType="toyproject.controller.dto.RegisterRequestDto">
        INSERT INTO USER (
            email, password, name, phone, gender, birth_year, birth_month, birth_day,
            zipcode, address, address_detail, rest_period, created_at
        ) VALUES (
                     #{email}, #{password}, #{name}, #{phone}, #{gender}, #{birthYear}, #{birthMonth}, #{birthDay},
                     #{zipcode}, #{address}, #{addressDetail}, #{restPeriod}, NOW()
                 )
    </insert>

    <!--  로그인용 SELECT 문 추가 -->
    <select id="findByEmail" parameterType="String" resultType="toyproject.controller.dto.LoginUserDto">
        SELECT USER_ID_EMAIL AS email,
               USER_PWD AS password
                USER_ID AS userId
        FROM USER
        WHERE USER_ID_EMAIL = #{email}
    </select>


</mapper>